# Биржа для проведения торгов криптовалютами
## Обзор
Сервис является RESTfull API приложением. 
Согласно ТЗ реализованы минимальные требования и часть(одно) дополнительные задания
### Сервис реализует упрощенный функционал криптобиржи (минимальные требования)
#### Функционал для пользователя
* Регистрация нового пользователя
* Просмотр баланса своего кошелька
* Пополнение кошелька
* Вывод денег с биржи
* Обмен валют по установленному курсу
#### Функционал для администратора
* Изменение курса валют
* Просмотр общей суммы на всех пользовательских счетах для указанной валюты
* Просмотр количества операций, которые были проведены за указанный период
#### Общий функционал
* Просмотр актуальных курсов валют
### Сервис реализует дополнительные требования
Подключена база данных PostgreSQL для хранения данных о балансе пользовательских кошельков и истории операций
### Использованные технологии
* Java 17
* Spring Boot
* Maven 
* Lombok
## Endpoints

### Регистрация нового пользователя
`POST /createUser` В случае размещения приложения на порте 8080 запрос будет выглядеть так:
**localhost:8080/createUser**

#### Параметры
`{
"userName": "vasya_veunchic",
"email": "vasyu_kolg@mail.ru"
}` - 
Принимает JSON с уникальными именем пользователя и почтовым адресом, иначе отказано в регистрации
#### Ответ
`{
"secret_key": "HZryIqHw9jCaDygmU7+V5Q=="
}` - 
Возвращает уникальный secret_key 
#### Пример запроса
![image](https://user-images.githubusercontent.com/104074337/222151815-595f8fdf-4d4e-4ecb-9786-61a587bb97dc.png)
#### Пример ответа

![image](https://user-images.githubusercontent.com/104074337/222151939-e1073bf5-537d-4d47-a7ae-3925bf71ec41.png)
##### Пример ошибки регистрации 
![image](https://user-images.githubusercontent.com/104074337/222154054-9ec08127-ec78-456f-9ca7-723bd7cd0798.png)

### Просмотр баланса своего кошелька
`GET /checkBalance` В случае размещения приложения на порте 8080 запрос будет выглядеть так:
**localhost:8080/checkBalance**
#### Параметры
`{
"secret_key":"UjoFM6prvzX+JpZ6u9/+Yg=="
}` - 
Принимает секретный ключ полученный при регистрации
#### Ответ
`{
"rub_wallet": 1460,
"btc_wallet": 0.00159400,
"ton_wallet": 3.000000
}` - 
Возвращает баланс кошелька пользователя 



### Пополнение кошелька
`POST /addBalance` В случае размещения приложения на порте 8080 запрос будет выглядеть так:\
**localhost:8080/addBalance**
#### Параметры
`{
"secret_key": "UjoFM6prvzX+JpZ6u9/+Yg==",
"rub_wallet": "1000"
}` - 
Принимает секретный ключ и сумму пополнения
#### Ответ
`{
"rub_wallet": 2460
}` - 
Возвращает обновленный баланс кошелька


### Вывод денег с биржи
`POST /withdrawalOfMoney` В случае размещения приложения на порте 8080 запрос будет выглядеть так:\
**localhost:8080/withdrawalOfMoney**
#### Параметры
`{
"secret_key": "LObdv1ZueEIcgAUqta1TNQ==",
"currency": "RUB",
"count": "20",
"wallet": "1234 5678 9012 3456"
}` - 
Принимает секретный ключ от кошелька с которого будут выводиться деньги, валюту для вывода,\
её колличество и номер кредитной карты или адрес кошелька(для крипты)
#### Ответ
`{
"rub_wallet": 2440
}` - 
Возвращает обновленный баланс кошелька



### Обмен валют по установленному курсу
`POST /currencyExchange` В случае размещения приложения на порте 8080 запрос будет выглядеть так:
**localhost:8080/currencyExchange**
#### Параметры
`{
"secret_key": "UjoFM6prvzX+JpZ6u9/+Yg==",
"currency_from": "RUB",
"currency_to": "TON",
"amount": 500
}` - 
Принимает ключ кошелька в котором будет производиться обмен, валюту, которую меняем, её количество, и валюту, которую хотим получить
#### Ответ
`{
"currency_from": "RUB",
"currency_to": "TON",
"amount_from": 500,
"amount_to": 2.777778
}` - 
Возвращает валюту, которую обменяли, её количество, валюту, которую хотим получить и её полученное количество


### Изменение курса валют
`POST/changeExchangeRate` В случае размещения приложения на порте 8080 запрос будет выглядеть так:\
**localhost:8080/changeExchangeRate**
#### Параметры
`{
"secret_key": "gQBrrc7buxFGrgraD4Kwhg==",
"base_currency": "BTC",
"ton": "10455.874",
"rub": "1882057.90"
}` - 
Принимает ключ администратора, валюту курс которой хотим изменить и новый курс относительно других валют
#### Ответ
`{
"rub": 1882057.90,
"ton": 10455.874
}`
Возвращает обновленный курс выбранной валюты



### Просмотр общей суммы на всех пользовательских счетах для указанной валюты
`GET /totalAmountAllAccounts` В случае размещения приложения на порте 8080 запрос будет выглядеть так:\
**localhost:8080/totalAmountAllAccounts**
#### Параметры
`{
"secret_key": "erDT5XSfhyYzxWf6ZebKPg==",
"currency": "RUB"
}` - 
Принимает ключ администратора и указанную валюту
#### Ответ
`{
"rub_wallet": 1940
}` - 
Возвращает общую сумму указанной валюты во всех кошельках



### Просмотр количества операций, которые были проведены за указанный период
`GET /numberOfOperationsDuringPeriod` В случае размещения приложения на порте 8080 запрос будет выглядеть так:\
**localhost:8080/numberOfOperationsDuringPeriod**
#### Параметры
`{
"secret_key": "gQBrrc7buxFGrgraD4Kwhg==",
"date_from": "2023-02-28",
"date_to": "2023-03-01"
}` - 
Принимает ключ администратора, начало периода и его конец
#### Ответ
`{
"transaction_count": 20
}` -
Возвращает колличество транзакций за указанный период



### Просмотр актуальных курсов валют
`GET /currentExchangeRates` В случае размещения приложения на порте 8080 запрос будет выглядеть так:\
**localhost:8080/currentExchangeRates**
#### Параметры
`{
"secret_key": "UjoFM6prvzX+JpZ6u9/+Yg==",
"currency": "BTC"
}` -
Принимает ключ и валюту для просмотра ее курса
#### Ответ
`{
"ton": 10455.876202426,
"rub": 1882057.72
}` - 
Возвращает курс указанной валюты